var formId=0,config=[],inputids=[],contentids=[];window.onload=function(){for(formId in contentids)if(typeof contentids[formId]=="number"){var c=document.getElementById("datamints_feuser_"+formId+"_form");addEvent(c,"submit",formCheck);for(var b=0;b<inputids[formId].length;b++){c=document.getElementById(inputids[formId][b]);c.type=="checkbox"?addEvent(c,"click",inputItemCheck):addEvent(c,"change",inputItemCheck)}}}; function formCheck(c){var b,a=false;formId=getEventTarget(c).id.split("_")[2];for(fieldId in inputids[formId])if(typeof inputids[formId][fieldId]=="string"){b=inputItemCheck(null,document.getElementById(inputids[formId][fieldId]));if(b==true&&a==false){a=true;window.event?event.returnValue=false:c.preventDefault()}}} function inputItemCheck(c,b){var a=null,e=null,f=e=a=null;if(c!=null)b=getEventTarget(c);var d=b.value.replace(/\s+$/,"").replace(/^\s+/,"");if(b.type=="select-multiple"){e=0;d=[];for(a=0;a<b.options.length;a++)if(b.options[a]!=null&&b.options[a].selected){d[e]=b.options[a].value;e++}}if(b.type=="checkbox")if(b.id.lastIndexOf("_item_")>=0){d=false;a=b.id.slice(0,b.id.lastIndexOf("_item_"));e=document.getElementById(a+"_wrapper").getElementsByTagName("input");for(a=0;a<e.length;a++)if(e[a]!=null&& e[a].checked)d=true}else d=b.checked;if(b.type=="radio"){d=false;a=b.id.slice(0,b.id.lastIndexOf("_item_"));e=document.getElementById(a+"_wrapper").getElementsByTagName("input");for(a=0;a<e.length;a++)if(e[a]!=null&&e[a].checked)d=true}a=b.name.split("[")[2].split("]")[0];if(a.split("_").reverse()[0]=="rep")a=a.slice(0,a.length-4);removeInfo(a);formId=b.id.split("_")[2];if(config[formId][a]!=null){e=config[formId][a].validation;if(config[formId][a].required&&(!d||typeof d=="object"&&!d.length)){showInfo(a, "required");return true}else if(e)switch(e.type){case "password":var g=(b.id.split("_").reverse()[0]!="rep"?document.getElementById(b.id+"_rep"):document.getElementById(b.id.slice(0,b.id.length-4))).value;if(d!=""||g!=""){f=["6"];if(d==g)if(e.size){f=e.size.replace(" ","").split(",");if(f[1]){if(d.length<f[0]||d.length>f[1]){showInfo(a,"size");return true}}else if(d.length<f[0]){showInfo(a,"size");return true}}else{if(d.length<f[0]){showInfo(a,"size");return true}}else{showInfo(a,"equal");return true}}break; case "email":if(!d.match(/^[a-zA-Z0-9\._%+-]+@[a-zA-Z0-9\.-]+\.[a-zA-Z]{2,6}$/)){showInfo(a,"valid");return true}break;case "username":if(!d.match(/^[^ ]*$/)){showInfo(a,"valid");return true}break;case "zero":if(d=="0"){showInfo(a,"valid");return true}break;case "emptystring":if(d==""){showInfo(a,"valid");return true}break;case "custom":if(e.regexp)if(typeof d=="object"){f=0;for(f in d)if(!d[f].match(e.regexp)){showInfo(a,"valid");return true}}else if(!d.match(e.regexp)){showInfo(a,"valid");return true}if(e.size){f= e.size.replace(" ","").split(",");if(f[1]){if(d.length<f[0]||d.length>f[1]){showInfo(a,"size");return true}}else if(d.length<f[0]){showInfo(a,"size");return true}}}}return false}function addEvent(c,b,a){if(c.addEventListener)c.addEventListener(b,a,false);else if(c.attachEvent){c["e"+b+a]=a;c[b+a]=function(){c["e"+b+a](window.event)};c.attachEvent("on"+b,c[b+a])}}function getEventTarget(c){return c.target?c.target:c.srcElement} function showInfo(c,b){var a=getErrorItemFather(c);if(a!=undefined){a.lastChild.className=="form_error "+c+"_error"&&a.removeChild(a.lastChild);var e=document.createElement("div");e.className="form_error "+c+"_error";e.innerHTML=config[formId][c][b];a.appendChild(e)}}function removeInfo(c){var b=getErrorItemFather(c);b!=undefined&&b.lastChild.className=="form_error "+c+"_error"&&b.removeChild(b.lastChild)} function getErrorItemFather(c){var b=c;if(config[formId][c].validation&&config[formId][c].validation.type=="password")b=c+"_rep";return document.getElementById("datamints_feuser_"+formId+"_"+b+"_wrapper")};